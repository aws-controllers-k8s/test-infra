# Autogenerated. Do NOT update Manually.
# Last generated on 2021-12-07 14:15:19.851246.
periodics:
- name: periodic-close
  interval: 6h
  decorate: true
  annotations:
    description: Closes rotten issues after 30d of inactivity
  agent: kubernetes
  spec:
    serviceAccountName: pre-submit-service-account
    containers:
      - image: gcr.io/k8s-prow/commenter:v20210422-d12e80af3e
        command:
          - /app/robots/commenter/app.binary
        args:
          - --query=org:aws-controllers-k8s -label:lifecycle/frozen label:lifecycle/rotten
          - --updated=720h
          - --token=/etc/github/token
          - |-
            --comment=Rotten issues close after 30d of inactivity.
            Reopen the issue with `/reopen`.
            Provide feedback via https://github.com/aws-controllers-k8s/community.
            /close
          - --template
          - --confirm
          - --ceiling=10
        volumeMounts:
          - name: github-token
            mountPath: /etc/github
            readOnly: true
    volumes:
      - name: github-token
        secret:
          secretName: prowjob-github-token
- name: periodic-rotten
  interval: 6h
  decorate: true
  annotations:
    description: Moves stale issues to rotten state after 30d of inactivity
  agent: kubernetes
  spec:
    serviceAccountName: pre-submit-service-account
    containers:
      - image: gcr.io/k8s-prow/commenter:v20210422-d12e80af3e
        command:
          - /app/robots/commenter/app.binary
        args:
          - --query=org:aws-controllers-k8s -label:lifecycle/frozen -label:lifecycle/rotten label:lifecycle/stale
          - --updated=720h
          - --token=/etc/github/token
          - |-
            --comment=Stale issues rot after 30d of inactivity.
            Mark the issue as fresh with `/remove-lifecycle rotten`.
            Rotten issues close after an additional 30d of inactivity.
            If this issue is safe to close now please do so with `/close`.
            Provide feedback via https://github.com/aws-controllers-k8s/community.
            /lifecycle rotten
          - --template
          - --confirm
          - --ceiling=10
        volumeMounts:
          - name: github-token
            mountPath: /etc/github
            readOnly: true
    volumes:
      - name: github-token
        secret:
          secretName: prowjob-github-token
- name: periodic-stale
  interval: 6h
  decorate: true
  annotations:
    description: Adds lifecycle/stale to issues after 90d of inactivity
  agent: kubernetes
  spec:
    serviceAccountName: pre-submit-service-account
    containers:
      - image: gcr.io/k8s-prow/commenter:v20210422-d12e80af3e
        command:
          - /app/robots/commenter/app.binary
        args:
          - --query=org:aws-controllers-k8s -label:lifecycle/frozen -label:lifecycle/rotten -label:lifecycle/stale
          - --updated=2160h
          - --token=/etc/github/token
          - |-
            --comment=Issues go stale after 90d of inactivity.
            Mark the issue as fresh with `/remove-lifecycle stale`.
            Stale issues rot after an additional 30d of inactivity and eventually close.
            If this issue is safe to close now please do so with `/close`.
            Provide feedback via https://github.com/aws-controllers-k8s/community.
            /lifecycle stale
          - --template
          - --confirm
          - --ceiling=10
        volumeMounts:
          - name: github-token
            mountPath: /etc/github
            readOnly: true
    volumes:
      - name: github-token
        secret:
          secretName: prowjob-github-token
postsubmits:
  aws-controllers-k8s/code-generator:
  - name: auto-generate-controllers
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-auto-generate-controllers-0.0.5
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/auto-generate-controllers.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
  aws-controllers-k8s/community:
  - name: community-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    run_if_changed: "docs/.*"
    branches:
    - main
  aws-controllers-k8s/apigatewayv2-controller:
  - name: apigatewayv2-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: apigatewayv2-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: apigatewayv2-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: apigatewayv2-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/applicationautoscaling-controller:
  - name: applicationautoscaling-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: applicationautoscaling-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: applicationautoscaling-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: applicationautoscaling-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/dynamodb-controller:
  - name: dynamodb-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: dynamodb-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: dynamodb-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: dynamodb-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/ec2-controller:
  - name: ec2-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: ec2-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: ec2-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: ec2-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/ecr-controller:
  - name: ecr-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: ecr-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: ecr-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: ecr-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/eks-controller:
  - name: eks-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: eks-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: eks-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: eks-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/elasticache-controller:
  - name: elasticache-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: elasticache-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: elasticache-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: elasticache-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/iam-controller:
  - name: iam-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: iam-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: iam-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: iam-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/kms-controller:
  - name: kms-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: kms-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: kms-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: kms-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/lambda-controller:
  - name: lambda-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: lambda-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: lambda-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: lambda-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/mq-controller:
  - name: mq-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: mq-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: mq-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: mq-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/opensearchservice-controller:
  - name: opensearchservice-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: opensearchservice-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: opensearchservice-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: opensearchservice-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/rds-controller:
  - name: rds-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: rds-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: rds-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: rds-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/s3-controller:
  - name: s3-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: s3-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: s3-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: s3-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/sagemaker-controller:
  - name: sagemaker-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: sagemaker-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: sagemaker-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: sagemaker-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/sfn-controller:
  - name: sfn-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: sfn-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sns-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: sfn-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: sfn-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  aws-controllers-k8s/sns-controller:
  - name: sns-post-submit
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-deploy-0.0.6
          securityContext:
            privileged: true
          command: ["/bin/bash", "-c", "cd cd/scripts && ./release-controller.sh"]
    branches: #supports tags too.
    - ^v[0-9]+\.[0-9]+\.[0-9]+$
    - stable

  - name: sns-docs-release
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: community
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: apigatewayv2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: applicationautoscaling-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ec2-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: eks-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: elasticache-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: iam-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: kms-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: lambda-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: mq-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: opensearchservice-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: rds-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sagemaker-controller
      base_ref: main
    - org: aws-controllers-k8s
      repo: sfn-controller
      base_ref: main
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-docs-0.0.3
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_ID
            value: "82905295"
          command: ["/docs/build-docs.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$

  - name: sns-controller-release-tag
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-controller-release-tag-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/auto-generate/controller-release-tag.sh"]
    branches:
    - main

  - name: sns-controller-olm-bundle-pr
    decorate: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: post-submit-service-account
      containers:
        - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-bundle-pr-0.0.1
          env:
          - name: GITHUB_TOKEN
            valueFrom:
              secretKeyRef:
                name: prowjob-github-token
                key: token
          - name: GITHUB_ACTOR
            value: "ack-bot"
          - name: GITHUB_EMAIL_PREFIX
            value: "82905295"
          command: ["/bin/bash", "-c", "./cd/olm/olm-bundle-pr.sh"]
    branches:
    - ^v[0-9]+\.[0-9]+\.[0-9]+$


presubmits:
  aws-controllers-k8s/code-generator:
  - name: unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 1
        command: ["make", "test"]

  - name: s3-olm-test
    decorate: true
    optional: true
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
      workdir: false
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-olm-test-0.0.1
        env:
        - name: SERVICE
          value: "s3"
        - name: ACK_GENERATE_OLM
          value: "true"
        command: ["make", "build-controller"]

  - name: dynamodb-controller-test
    decorate: true
    optional: true
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: dynamodb-controller
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        env:
        - name: SERVICE
          value: dynamodb
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "./cd/core-validator/generate-test-controller.sh"]

  - name: ecr-controller-test
    decorate: true
    optional: true
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: ecr-controller
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        env:
        - name: SERVICE
          value: ecr
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "./cd/core-validator/generate-test-controller.sh"]

  - name: s3-controller-test
    decorate: true
    optional: true
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: runtime
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    - org: aws-controllers-k8s
      repo: s3-controller
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        env:
        - name: SERVICE
          value: s3
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "./cd/core-validator/generate-test-controller.sh"]


  aws-controllers-k8s/runtime:
  - name: unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 1
        command: ["make", "test"]

  aws-controllers-k8s/apigatewayv2-controller:
  - name: apigatewayv2-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: apigatewayv2
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: apigatewayv2-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: apigatewayv2
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: apigatewayv2-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: apigatewayv2
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: apigatewayv2-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: apigatewayv2
        command: ["make", "test"]

  aws-controllers-k8s/applicationautoscaling-controller:
  - name: applicationautoscaling-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: applicationautoscaling
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: applicationautoscaling-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: applicationautoscaling
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: applicationautoscaling-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: applicationautoscaling
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: applicationautoscaling-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: applicationautoscaling
        command: ["make", "test"]

  aws-controllers-k8s/dynamodb-controller:
  - name: dynamodb-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: dynamodb
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: dynamodb-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: dynamodb
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: dynamodb-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: dynamodb
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: dynamodb-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: dynamodb
        command: ["make", "test"]

  aws-controllers-k8s/ec2-controller:
  - name: ec2-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: ec2
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: ec2-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: ec2
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: ec2-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: ec2
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: ec2-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: ec2
        command: ["make", "test"]

  aws-controllers-k8s/ecr-controller:
  - name: ecr-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: ecr
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: ecr-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: ecr
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: ecr-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: ecr
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: ecr-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: ecr
        command: ["make", "test"]

  aws-controllers-k8s/eks-controller:
  - name: eks-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: eks
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: eks-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: eks
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: eks-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: eks
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: eks-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: eks
        command: ["make", "test"]

  aws-controllers-k8s/elasticache-controller:
  - name: elasticache-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: elasticache
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: elasticache-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: elasticache
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: elasticache-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: elasticache
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: elasticache-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: elasticache
        command: ["make", "test"]

  aws-controllers-k8s/iam-controller:
  - name: iam-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: iam
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: iam-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: iam
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: iam-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: iam
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: iam-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: iam
        command: ["make", "test"]

  aws-controllers-k8s/kms-controller:
  - name: kms-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: kms
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: kms-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: kms
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: kms-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: kms
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: kms-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: kms
        command: ["make", "test"]

  aws-controllers-k8s/lambda-controller:
  - name: lambda-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: lambda
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: lambda-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: lambda
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: lambda-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: lambda
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: lambda-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: lambda
        command: ["make", "test"]

  aws-controllers-k8s/mq-controller:
  - name: mq-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: mq
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: mq-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: mq
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: mq-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: mq
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: mq-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: mq
        command: ["make", "test"]

  aws-controllers-k8s/opensearchservice-controller:
  - name: opensearchservice-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: opensearchservice
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: opensearchservice-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: opensearchservice
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: opensearchservice-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: opensearchservice
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: opensearchservice-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: opensearchservice
        command: ["make", "test"]

  aws-controllers-k8s/rds-controller:
  - name: rds-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: rds
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: rds-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: rds
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: rds-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: rds
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: rds-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: rds
        command: ["make", "test"]

  aws-controllers-k8s/s3-controller:
  - name: s3-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: s3
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: s3-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: s3
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: s3-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: s3
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: s3-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: s3
        command: ["make", "test"]

  aws-controllers-k8s/sagemaker-controller:
  - name: sagemaker-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: sagemaker
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: sagemaker-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: sagemaker
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: sagemaker-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: sagemaker
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: sagemaker-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: sagemaker
        command: ["make", "test"]

  aws-controllers-k8s/sfn-controller:
  - name: sfn-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: sfn
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: sfn-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: sfn
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: sfn-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: sfn
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: sfn-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: sfn
        command: ["make", "test"]

  aws-controllers-k8s/sns-controller:
  - name: sns-kind-e2e
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: sns
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "true"
        - name: ENABLE_HELM_CHART_TEST
          value: "false"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: sns-release-test
    decorate: true
    optional: false
    always_run: true
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
    extra_refs:
    - org: aws-controllers-k8s
      repo: code-generator
      base_ref: main
      workdir: false
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-integration-0.0.5
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
          limits:
            cpu: 8
        env:
        - name: SERVICE
          value: sns
        - name: DUMP_CONTROLLER_LOGS
          value: "true"
        - name: ENABLE_E2E_TESTS
          value: "false"
        - name: ENABLE_HELM_CHART_TEST
          value: "true"
        command: ["wrapper.sh", "bash", "-c", "make kind-test SERVICE=$SERVICE"]

  - name: sns-recommended-policy-test
    decorate: true
    optional: false
    always_run: true
    extra_refs:
    - org: aws-controllers-k8s
      repo: test-infra
      base_ref: main
      workdir: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/bitnami/aws-cli:2.2.43
        securityContext:
          runAsUser: 0
        env:
        - name: SERVICE
          value: sns
        command: ["bash", "-c", "./scripts/test-recommended-policy.sh"]

  - name: sns-unit-test
    decorate: true
    optional: false
    always_run: true
    spec:
      serviceAccountName: pre-submit-service-account
      containers:
      - image: public.ecr.aws/m5q3e4b2/prow:prow-unit-0.0.1
        resources:
          limits:
            cpu: 2
        env:
        - name: SERVICE
          value: sns
        command: ["make", "test"]


